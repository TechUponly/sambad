
# New User Schema
type User {
  id: ID!
  phone: String!
  email: String
  name: String
  status: String!
  created_at: String!
  last_active_at: String
}

type UserConsent {
  user_id: ID!
  analytics_consent: Boolean!
  marketing_consent: Boolean!
  terms_version: String
  updated_at: String!
}

type ContactChannel {
  id: ID!
  user_id: ID!
  channel: String!
  address: String!
  verified: Boolean!
  created_at: String!
}

type UserEvent {
  id: ID!
  user_id: ID!
  event_type: String!
  metadata: String
  created_at: String!
}

type AdminUser {
  id: ID!
  email: String!
  role: String!
  created_at: String!
  last_login_at: String
}

type AdminAuditLog {
  id: ID!
  admin_id: ID
  action: String!
  target_type: String
  target_id: String
  metadata: String
  created_at: String!
}

type Query {
  users: [User!]!
  user(id: ID!): User
  userConsents: [UserConsent!]!
  contactChannels: [ContactChannel!]!
  userEvents: [UserEvent!]!
  adminUsers: [AdminUser!]!
  adminAuditLogs: [AdminAuditLog!]!
}

type Mutation {
  createUser(phone: String!, email: String, name: String, status: String): User!
  updateUser(id: ID!, phone: String, email: String, name: String, status: String): User!
  createUserConsent(user_id: ID!, analytics_consent: Boolean!, marketing_consent: Boolean!, terms_version: String): UserConsent!
  createContactChannel(user_id: ID!, channel: String!, address: String!, verified: Boolean): ContactChannel!
  createUserEvent(user_id: ID!, event_type: String!, metadata: String): UserEvent!
  createAdminUser(email: String!, role: String!): AdminUser!
  createAdminAuditLog(admin_id: ID, action: String!, target_type: String, target_id: String, metadata: String): AdminAuditLog!
}
